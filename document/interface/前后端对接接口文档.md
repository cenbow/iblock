- [1 概述](#1)
- [2 接口约定](#2)
  - [2.1 统一响应模型](#2-1)
  - [2.2 分页请求](#2-2)
  - [2.3 分页响应](#2-3)
- [3 数据模型](#3)
- [4 接口定义](#4)

# 1 概述

本文档是针对IBLOCK前后端HTTP接口的说明文档，包括接口约定、数据模型和接口定义等，前后端互相传输的参数统一用JSON格式。 

# 2 接口约定

## 2.1 统一响应模型

名称：response

```
{
  "status": 0, // 0代表成功，其他状态码后续结合具体业务再定
  "msg": "", // 状态详情
  "data": { // 具体数据，可以为空
      // 数据结构与具体业务相关，参考下面[数据模型]定义
    }
  } 
}
```

## 2.2 分页请求

名称：pageRequest

```
{
  "pageNo": 1, // 必填，从1开始
  "pageSize": 20, // 必填
  "order": "asc", 
  "orderBy": "updateTime"
}
```

## 2.3 分页响应

名称：pageResponse

```
{
  "status": 0, // 0代表成功，其他状态码后续结合具体业务再定
  "msg": "", // 状态详情
  "data": {
    "pageNo": 1, // 必有
    "pageSize": 20, // 必有
    "order": "asc",
    "orderBy": "updateTime",
    "totalCount":100 // 必有
    "result":[]  // 数据结构与具体业务相关，参考下面[数据模型]定义
    }
  } 
}
```

# 3 数据模型

为方便描述，下面定义各业务涉及的数据模型，接口描述中涉及到数据模型时用${模型名}来指代。

## 3.1 枚举
|枚举名|枚举值|说明|
|:-:|:-:|:-:|
|ResponseStatus|0成功执行 404未找到资源 500系统错误 501外部接口错误 403没有权限 415参数错误 501 校验错误|响应状态|
|UserRole|1经纪人 2设计师 3项目经理 4系统管理员|用户类型|
|UserStatus|1隐身 2 在线 3 冻结 4 忙碌? |用户状态|

# 4 接口定义

## 4.1 登录 

|**URI**|user/logon|
|:-:|:-:|
|**Method**| POST|
|**Role**| 1 2 3 4 |

Request-header

```
{
	"username":""
	"passwd":""
}
```

Response

```
{
	"status":""
	"msg":""
}
```
## 4.2 验证手机号

|**URI**|/user/sendValidateCode/|
|:-:|:-:|
|**Method**| POST|
|**Role**| 1|

Request 1:

```
{
	"phone":"187129892"
}

```
Response 2:

```
{
  "status": 0, // 0代表成功，其他状态码后续结合具体业务再定
  "msg": "", // 状态详情

}
```

## 4.3 注册 (不自动登录)
|**URI**|user/signup|
|:-:|:-:|
|**Method**| POST|
|**Role**| 1 2 3 4 |

Request （设计师)

```
{
	"username":""
	"passwd":"",
	"contactPhone":"",
	"verifyCode":"",//手机验证码
	"geo": {
      "province":"上海市",
      "city":"上海市",
      "district": "杨浦区",
      "address": "五角场XX路XX号"
    }
}
```

Request （项目经理)

```
{
	"username":""
	"passwd":"",
	"contactPhone":"",
	"verifyCode":"",//手机验证码
	"geo": {
      "province":"上海市",
      "city":"上海市"
   },
   "corporateName":"设计有限公司",//
   "corporateBio":"公司简介"//

}
```

Response

```
{
	"status":"",
	"errorMsg":""
}
```


## 4.4 个人信息 


### 4.4.1 获取个人信息

|**URI**| user/info/{userid}|
|:-:|:-:|
|**Method**| GET|
|**Role**| 1 2 3 4 |

```
{
  "status": 0, 
  "msg": "", 
  "data": {
    "userid": 1, 
    "username": "贾翕",
    "rating": 6,
    "education": 2,
    "status":0,
    "role":2,
    "contactPhone":"13311625852",
    "geo":{
    	"province":1,
    	"city":1,	
    	"street":"杨浦市区五角场街道"
    },
    "skills":[],
    "avatar":"/img/jesse.jpg"
	}
}
```




### 4.4.2 更新个人信息

|**URI**| user/updateUserInfo|
|:-:|:-:|
|**Method**| POST|
|**Role**| 1 2 3 4 |
```
{
  "status": "1", //更新状态，隐身、在线
  "education": 1,// 2  更新学历
  "geo": {//更新地理位置
    "province":1,
    "city":1,
    "district": 1
    "address": "五角场XX路XX号"
  },
  "corporateName":"设计有限公司",// 3 only 更新公司资料
  "corporateBio":"公司简介"//3 only 更新公司资料
  }
}
```

Return: 

```
{
  "status": 0, // 0代表成功
  "msg": "", // 状态详情
}
```



### 4.4.3 获取工作经验(仅限设计师)
|**URI**| user/getWorkExpirience/{userid}|
|:-:|:-:|
|**Method**| GET|
|**Role**| 1 2 3 4 |
```
{
  "status": 0, // 0代表成功，其他状态码后续结合具体业务再定
  "msg": "", // 状态详情
  "data": {
    "expirience":[{
      "id": 123,
      "industry":"1",
      "corporate":"XX设计有限公司",
      "time": 4,
      "desc" "担任设计师职位"
    },...]
  }
}
```

### 4.4.4 添加工作经验
|**URI**| user/addWorkExpirience|
|:-:|:-:|
|**Method**| POST|
|**Role**| 2|
```
{
  "id": 123,
  "industry":"1",
  "corporate":"XX设计有限公司",
  "year": 4,
  "desc" "担任设计师职位"
}
```
Return: 和4.4.3一样

### 4.4.5 删除工作经验
|**URI**| user/deleteWorkExpirience|
|:-:|:-:|
|**Method**| POST|
|**Role**| 2|
```
{
  "id": 123
}
```
Return: 

```
{
  "status": 0, // 0代表成功
  "msg": "", // 状态详情
}
```



### 4.4.6 获取工作兴趣
|**URI**| user/getWorkPrefs/{userid}|
|:-:|:-:|
|**Method**| GET|
|**Role**| 2|

```
{
  "status": 0, // 0代表成功，其他状态码后续结合具体业务再定
  "msg": "", // 状态详情
  "data": {
    "industry:[1,2,5],//行业
    "city":["SH", "BJ", "GZ"],//城市
    "minPay":8000,
    "maxPay":12000,
    "isLongTerm": false// 是否驻场
  }
}
```

### 4.4.7 更新工作兴趣

|**URI**| user/updateWorkPrefs|
|:-:|:-:|
|**Method**| POST|
|**Role**| 2|

```
{
    "industry:[1,2,5],//行业
    "city":["SH", "BJ", "GZ"],//城市
    "minPay":8000,
    "maxPay":12000,
    "isLongTerm": false// 是否驻场
}
```
Return : no data


### 4.4.7 获取用户头像(TBD)

|**URI**| user/getUserFavicon/{userid}|
|:-:|:-:|
|**Method**| GET|
|**Role**| all|


### 4.4.8 上传用户头像(TBD)

|**URI**| user/updateUserFavicon|
|:-:|:-:|
|**Method**| POST|
|**Role**| all|


### 4.4.9 添加共同经历

发送站内消息 4.4.10 给设计师

|**URI**| user/applyCommonExp|
|:-:|:-:|
|**Method**| POST|
|**Role**| 2|

Request:

```
{
	"userid":12,
	"desc":"",
	"startDate":"yyyy-MM-dd",
	"endDate":"yyyy-MM-dd",
}
```

Response:

```
{
  "status": 0, // 0代表成功
  "msg": "", // 状态详情
}
```
### 4.4.10 接受添加共同经历

站内信:

```
{
	"msg":{
		"content":"{贾翕|user?id=12} 请求添加共同项目经历(2016-12-23~2016-12-26): 世纪公园一期"
	}
	"service":"user/acceptCommonExp",
	"postparams":{
		"messageid":11,
		"desc":"",
		"startDate":"yyyy-MM-dd",
		"endDate":"yyyy-MM-dd",
		"destuserid":11,
		"sourceuserid":12
	}
}
```

发送只读站内信给申请者：
```
{
	"msg":{
		"content":"{方璐|user?id=11} 接受了你的共同项目经历申请"
	}
}
```

### 4.4.11 上传个人作品 TBD



## 4.5 个人账户
### 4.5.1 获取我的账户余额
|**URI**| account/balance|
|:-:|:-:|
|**Method**| GET|
|**Role**| 2|

Response:

```
{
  "status": 0, // 0代表成功
  "msg": "", // 状态详情,
  "data":{
  		"balance": 135.00
  }
}
```

### 4.5.2 获取我的账户明细

|**URI**| account/transactions|
|:-:|:-:|
|**Method**| POST|
|**Role**| 2|

Request:

```
{
  "pageNo": 1, // 必填，从1开始
  "pageSize": 20, // 必填
  "order": "asc", 
  "orderBy": "transTime"
}
```


Response:


```
{
  "status": 0, // 0代表成功，其他状态码后续结合具体业务再定
  "msg": "", // 状态详情
  "data": {
    "pageNo": 1, // 必有
    "pageSize": 20, // 必有
    "order": "asc",
    "orderBy": "updateTime",
    "totalCount":100 // 必有
    "result":[{
    		"transTime":"2016-12-11,02:12:31",
    		"desc":"提现/项目#id #name 结算",
    		"amount": -12.00// 
    }]  
    }
  } 
}
```



### 4.5.3 申请提现


|**URI**| account/applyWithdrawl|
|:-:|:-:|
|**Method**| POST|
|**Role**| 2|

Request:

```
{
	"amount":100//提取额度,
	"alipayAccount": "illusion1125@gmail.com",
}
```

Response:

```
{
	"status":0,
	"message":""
}
```


发送 (4.5.4) 站内信给管理员


### 4.5.4 完成提现

站内信参数 给管理员

```
{
	"msg":{
		"content":"{贾翕|user?id=12} 请求提现 金额 500.00。"
	}
	"service":"account/withdraw",
	"postparams":{
		"messageid":11,
		"amount":500,
		"alipayAccount": "illusion1125@gmail.com",
		"userid":12
	}
}
```
发送只读站内信给申请者：
```
{
	"msg":{
		"content":"您的提现申请 500元 已经被处理成功。"
	}
}
```


## 4.6 项目列表
### 4.6.1 获取项目搜索列表
|**URI**| project/search|
|:-:|:-:|
|**Method**| POST|
|**Role**| all|
Request:

```
{
	"pageNo": 1, //required
 	"pageSize": 20, //required
  	"order": "desc", 
  	"orderBy": "startTime",
	"keyword":"keyword",//搜索关键字	"minPay":10000, 
	"maxPay": 20000,
	"city": ["SH","SZ","BJ"],
	"industry": [1, 3, 5] //行业
}
```
Response:

```
{
	"status":0,
	"message":"",
	"data": {
		"pageNo": 1, // 必有
		"pageSize": 20, // 必有
		"order": "asc",
		"orderBy": "startTime",
		"totalCount":100 // 必有
		"result":[{
			"id":1,//PROJECT ID
			"name": "工程一期",//PROJECT NAMME
			"shortDesc": "< 100 words",//PROJECT BREIF Description
			"stauts":1,//PROJECT STATUS
			"startDate": "2015-12-21",//项目验收通过时间
			"city": "上海",
			"industry":"园林设计"
		}, ...]  // 数据结构与具体业务相关，参考下面[数据模型]定义
	}
}
```
### 4.6.2 获取推荐项目列表
|**URI**| project/recommended|
|:-:|:-:|
|**Method**| POST|
|**Role**| all|
Request:

```
{
	"pageNo": 1, //required
 	"pageSize": 20, //required
}
```
Response:
和4.6.1 一致

## 4.7 设计师列表
### 4.7.1 设计师搜索
|**URI**| users/searchDesigner|
|:-:|:-:|
|**Method**| POST|
|**Role**| all|
Request:

```
{
	"pageNo": 1, //required
 	"pageSize": 20, //required
 	"keyword":"keyword"//搜索关键字
}
```
Response:

```
{
	"status":0,
	"message":"",
	"data": {
		"pageNo": 1, // required
		"pageSize": 20, // required
		"totalCount":100, // required
		"result":[{
			"id":1,//USER ID
			"name": "贾翕",//USER NAME
			"stauts":1,//USER STATUS
			"city": "上海",// 
			"industry":["园林设计","建筑设计"],
			"avatar":"img url" //用户头像
		}, ...]  
	}
}
```
### 4.7.2 热门用户
|**URI**| user/hotUsers|
|:-:|:-:|
|**Method**| POST|
|**Role**| all|

REQUEST:

```
{
  "pageNo": 1, // 必填，从1开始
  "pageSize": 20 // 必填
}
```

RESPONSE:

```
{
  "status": 0, // 0代表成功，其他状态码后续结合具体业务再定
  "msg": "", // 状态详情
  "data": {
    "pageNo": 1, // 必有
    "pageSize": 20, // 必有
    "totalCount":100 // 必有,
    "result":[{
    	"userid": 12,
    	"username":"",
    	"status": 1,
    	"city":"SH",
    	"industry":["园林设计","建筑设计"]
    	"avatar":"头像URL"
    },{...
    }]  //
    
  } 
}
```

## 4.8 项目管理

|项目状态|描述|前置条件|下一步行为|
|:-:|:-:|:-:|:-:|
|0|创建中|4.8.1 非驻场项目表单提交|项目经理提交流程|
|1|审核中|驻场项目创建表单提交 或 4.8.2 非驻场项目提交流程|管理员审核|
|2|招募中|管理员审核项目通过 或 上一阶段验收完成|项目经理人确认招募完毕|
|3|进行中|项目经理确认完成当前阶段的招募|项目经理确认阶段完成|
|4|阶段验收中|项目经理确认当前阶段完成|经纪人验收|
|5|收尾中|经纪人完成最后一阶段的验收|项目经理评价并标记项目完成|
|6|归档中|项目经理评价经纪人和设计师并提交归档申请|经纪人处理申请|
|7|已完成|经纪人上传图片资料并归档|无|



### 4.8.1 项目创建

project status: 0, role: 3

|**URI**| project/new|
|:-:|:-:|
|**Method**| POST|
|**Role**| 3|
Request:

```
{
	"name":"项目名称",
	"city": "SH",
	"industry": 1,//项目所在行业
	"isLongTerm": false,//false : 非驻场项目
	"desc": "项目介绍"
}
```
Response:

```
{
  "status": 0, // 0代表成功
  "msg": "", // 状态详情
  "data": {
  		"id":1, //项目ID
  }
}

```

### 4.8.2 项目发布 

success: project status: 0->1, role: 3

(对非驻场项目，只有在项目中子流程已创建时发布成功）

|**URI**| project/publish/{projectid}|
|:-:|:-:|
|**Method**| POST|
|**Role**| 3|

Response:

```
{
  "status": 0, // 0代表成功
  "msg": "", // 状态详情
 }

```

### 4.8.3 新项目审核


accept: project status: 1->2, role: 4
reject: project status: 1->0, role: 4

|**URI**| project/accept|
|:-:|:-:|
|**Method**| POST|
|**Role**| 4|

Request:

```
{
	"id": 12, //
	"brokerId": 12//经纪人账户
	"accpet": true //false to reject the project
}
```
Response:

```
{
  "status": 0, // 0代表成功
  "msg": "", // 状态详情
 }

```

### 4.8.4 项目收尾

project status: 5->6, role: 3 (前提条件：项目经理对所有参与的设计师完成打分）

|**URI**| project/complete|
|:-:|:-:|
|**Method**| POST|
|**Role**| 3|

Request:

```
{
	"id": 12, //项目ID
	"ratings":[{
		"userid":12,//设计师ID
		"rate":5//设计师分数
	},{
		"userid":13,
		"rate":4.5
	}
	]
}
```
Response:

```
{
  "status": 0, // 0代表成功
  "msg": "", // 状态详情
 }

```

发送只读站内信给经纪人:

```
{
	"msg":{
		"content":"项目 {项目名称|project?id=3} 已完成，申请归档。"
	}
}
```



### 4.8.5 项目归档

project status: 6->7, role: 1

|**URI**| project/archive|
|:-:|:-:|
|**Method**| POST|
|**Role**| 4|

Request:

```
{
	"id": 12, //项目ID
}
```
Response:

```
{
  "status": 0, // 0代表成功
  "msg": "", // 状态详情
 }
```
### 4.8.9 项目修改

|**URI**| project/update|
|:-:|:-:|
|**Method**| POST|
|**Role**| 3|
Request:

```
{
	"id":11,
	"name":"项目名称",
	"city": "SH",
	"industry": 1,//项目所在行业
	"isLongTerm": false,//false : 非驻场项目
	"desc": "项目介绍"
}
```
Response:

```
{
  "status": 0, // 0代表成功
  "msg": "", // 状态详情
 
}

```

### 4.8.10 获取项目详情
|**URI**| project/getProjectDetail/{projectid}|
|:-:|:-:|
|**Method**| POST|
|**Role**| 3|

Response：

```
{
    "name":"项目名称",
    "city": "SH",
    "industry": 1,//项目所在行业
    "isLongTerm": false,//false : 非驻场项目
    "desc":"描述",
    "brokerID":"userid"
    "brokerName":"brokerName",
    "brokerAvartar":"url"
    "managerID":12,
    "managerName":"managerName",
    "managerAvatar":"img",
    "startDate":"2015-12-24",
    "endDate":"2016-12-24"//null if not ended
    "status":1项目状态

    
}
```
### 4.8.11 上传项目作品 TBD

## 4.9 阶段管理
|阶段状态|描述|前置条件|下一步行为|
|:-:|:-:|:-:|:-:|
|0|阶段就绪中|阶段创建完成|阶段进入招募阶段|
|1|阶段招募中|管理员审核项目通过 或 上一阶段验收完成|项目经理人确认招募完毕|
|2|阶段进行中|项目经理确认完成当前阶段的招募|项目经理确认阶段完成|
|3|阶段验收中|项目经理确认当前阶段完成|经纪人验收|
|4|阶段完成|经纪人验收完成|下一阶段招募或项目收尾|

### 4.9.1 添加阶段

|**URI**| project/step/add|
|:-:|:-:|
|**Method**| POST|
|**Role**| 3|
Request:

```
{
	"name":"阶段名称",
	"projectid": 1
}
```
Response:

```
{
  "status": 0, // 0代表成功
  "msg": "", // 状态详情
  "data":{
  	  "id":1,//阶段ID
  }
 
}

```

### 4.9.2 修改阶段
|**URI**| project/step/update|
|:-:|:-:|
|**Method**| POST|
|**Role**| 3|
Request:

```
{
	"name":"阶段名称",
	"projectid": 1,
	"id":1
}
```
Response:

```
{
  "status": 0, // 0代表成功
  "msg": "", // 状态详情
  "data":{
  	  "id":1,//阶段ID
  }
 
}
```
### 4.9.3 删除阶段
|**URI**| project/step/delete|
|:-:|:-:|
|**Method**| POST|
|**Role**| 3|
Request:

```
{
  "projectid": 1, 
  "id": 1 
}
```
Response:

```
{
  "status": 0, // 0代表成功
  "msg": "" // 状态详情
}
```
### 4.9.4 获取项目阶段信息
|**URI**| project/step/getAll|
|:-:|:-:|
|**Method**| GET|
|**Role**| all|
Response:

```
{
  "status": 0, // 0代表成功
  "msg": "" // 状态详情,
  "data":[{
  		"stepid":1,
  		"status":1,//阶段状态
  		"name": "阶段名称",
 		"positions": [{//开放职位
 			"positionid":12,
 			"positionName":"园林设计师",
 			"positionType": 12,//ENUMS, TBD
 			"salary": 20000,
 			"headcount": 3
 		},...],
 		"hired":[{//已雇佣人
 			"hireid":12,
 			"userid":133,
 			"username":"贾翕",
 			"positionType": 12,
 			"positionName": 14,
 			"salary":13440
 		}]	
   },{
  }]
}
```


### 4.9.5 阶段招募完成

step status: 1->2, role: 3
project status : 2->3,

|**URI**| project/step/completeHiring|
|:-:|:-:|
|**Method**| POST|
|**Role**| 3|


Request:

```
{
	"projectid": 1,
	"id": 1
}
```
Response:

```
{
  "status": 0, // 0代表成功
  "msg": "" // 状态详情
}
```
删除职位信息



### 4.9.6 阶段收尾
step status: 2->3, role: 3
project status: 3->4

|**URI**| project/step/completeStep|
|:-:|:-:|
|**Method**| POST|
|**Role**| 3|
Request:

```
{
	"projectid": 1,
	"id": 1
}
```
Response:

```
{
  "status": 0, // 0代表成功
  "msg": "" // 状态详情
}
```

发送只读站内信给经纪人:

```
{
	"msg":{
		"content":"项目 {项目名称|project?id=3} 阶段二 已完成，申请验收。"
	}
}
```




### 4.9.7 阶段验收
step status: 3->4, role: 1
step status for next:  0->1
project status: 4->2 or 4->5

Reject:
step status 3->2

|**URI**| project/step/acceptCompletion|
|:-:|:-:|
|**Method**| POST|
|**Role**| 3|
Request:

```
{
	"projectid": 1,
	"id":1,
	"payments":[{//和设计师结算工资,TBD: 是否需要自动按照规定工资结算，即不需要提供以下信息
		"userid": 12,
		"payment": 2000
	},{
		"userid": 13,
		"payment": 2000
	}]
	"accept":true // false reject
}
```
Response:

```
{
  "status": 0, // 0代表成功
  "msg": "" // 状态详情
}
```


## 4.10 招募管理
### 4.10.1 添加招募职位
|**URI**| /project/step/addPosition|
|:-:|:-:|
|**Method**| POST|
|**Role**| 3|
Request:

```
{
	"projectid": 1,
	"stepid":1,
	"positionType":1,
	"salary": 2000,
	"headCount": 3
}
```
Response:

```
{
  "status": 0, // 0代表成功
  	"msg": "" // 状态详情,
  	data:{
  		"positionId":12,
  		"positionName":"园林设计师",
 		"positionType": 12,//ENUMS, TBD
 		"salary": 20000,
 		"headcount": 3
 	}
}
```
### 4.10.2 修改招募职位
|**URI**| /project/step/updatePosition|
|:-:|:-:|
|**Method**| POST|
|**Role**| 3|
Request:

```
{
	"positionid":1,
	"positionType":1,
	"salary": 2000,
	"headCount": 3
}
```
Response:

```
{
  "status": 0, // 0代表成功
  	"msg": "" // 状态详情,
  	data:{
  		"positionId":12,
  		"positionName":"园林设计师",
 		"positionType": 12,//ENUMS, TBD
 		"salary": 20000,
 		"headcount": 3
 	}
}
```

### 4.10.3 删除招募职位
|**URI**| /project/step/deletePosition|
|:-:|:-:|
|**Method**| POST|
|**Role**| 3|
Request:

```
{
	"positionid": 12
}
```
Response:

```
{
  "status": 0, // 0代表成功
  	"msg": "" // 状态详情
}
```

### 4.10.4 雇佣人员
|**URI**| /project/step/addEmployee|
|:-:|:-:|
|**Method**| POST|
|**Role**| 3|

Request:

```
{
	"projectid": 1,
	"stepid":1,
	"userid":15,
	"salary": 2000,
	"positionType": 12,//ENUMS, TBD
}
```
Response:

```
{
  "status": 0, // 0代表成功
  	"msg": "" // 状态详情,
  	data:{
 		"hireid":12,
 		"userid":133,
 		"username":"贾翕",
 		"positionType": 12,
 		"positionName": "园林设计师",
 		"salary":13440
 	}
}
```


### 4.10.5 申请解除合约
发送站内信给经纪人，由经纪人确认4.10.6
|**URI**| /project/step/applyRemoveHiring|
|:-:|:-:|
|**Method**| POST|
|**Role**| 3|
Request:

```
{
	"hireid": 12
}
```
Response:

```
{
  "status": 0, // 0代表成功
  	"msg": "" // 状态详情
}
```

发送 4.10.6 站内信：



### 4.10.6 同意解除合约

站内信:

```
{
	"msg":"{贾翕|user?id=12} 请求解除 {项目名称|project?id=12} 阶段二与 {方璐|user?id=11} 的合约",
	"service":"project/step//acceptRemoveHiring",
	"postparams":{
		"hireid":12
	}
}
```


### 4.10.7 推荐设计师


|**URI**|/project/step/recommendEmployee|
|:-:|:-:|
|**Method**| POST|
|**Role**| 1|

Request:

```
{
	"projectid": 1,
	"stepid":1,
	"userid":15
}
```

Response:

```
{
  "status": 0, // 0代表成功
  	"msg": "" // 状态详情
}
```

发送只读站内信给项目经理:

```
{
	"msg":{
		"content":"经纪人 {贾翕|user?id=1} 为您的项目 {项目经理|project?id=4} 阶段二 推荐 设计师  {方璐|user?id=1} 。"
	}
}
```


### 4.10.8 获取推荐设计师列表
|**URI**|/project/step/getRecommededEmployee/{stepid}|
|:-:|:-:|
|**Method**| GET|
|**Role**| 1|

Response:

```
{
  "status": 0, // 0代表成功
  	"msg": "" // 状态详情
  	"data":[{
		"id":1,//USER ID
		"name": "贾翕",//USER NAME
		"stauts":1,//USER STATUS
		"city": "上海",// 
		"industry":["园林设计","建筑设计"],
		"avatar":"img url" //用户头像

  	}]
}
```



## 4.11 系统消息
### 4.11.1 获取消息
|**URI**|/user/messages|
|:-:|:-:|
|**Method**| POST|
|**Role**| 1 2 3 4 |

站内信说明: 

系统消息分为两类，只读和任务
只读消息在用户点击完消息后，发送4.11.3 post 请求 标记已读
任务消息有两个按钮 接受和拒绝， 
任务消息数据里的service field指定了 接受/拒绝 点击后需要发送请求的service url,
postparams里存储里请求参数
点击后根据这两个字段组合成相应的post请求发给服务器



已读消息只保留最近10条


Request:

```
{
  "pageNo": 1, // 必填，从1开始
  "pageSize": 20, // 必填
  "order": "asc", 
  "orderBy": "sendTime"
}
```


Response:

```

{
	"status":"",
	"msg":"",
	"length":"",
	"data":{
		"pageNo": 1, // 必有
    	"pageSize": 20, // 必有
    	"order": "asc",
    	"orderBy": "sendTime",
    	"totalCount":2 // 必有,
    	"results":[{
			"status": 0//0:未处理 , 1: 已处理
			"sendTime":"2015-12-12 12:01:21",
			"type":1,//0: 只读, 1:任务
			"msg":"{贾翕|user?id=12} 请求解除 {项目名称|project?id=12} 阶段二与 {方璐|user?id=11} 的合约",
			"service":"project/step//acceptRemoveHiring",
			"postparams":{
				"hireid":12
			}
		},{
			"status": 0//0:未处理 , 1: 已处理
			"sendTime":"2015-12-12 12:01:21",
			"type":0,//0: 只读
			"msg":"{贾翕|user?id=12} 请求解除 {项目名称|project?id=12} 阶段二与 {方璐|user?id=11} 的合约"
		
		},...]
}
```



### 4.11.2 消息操作 - 任务

|**URI**|/%service%|
|:-:|:-:|
|**Method**| POST|
|**Role**| 1 2 3 4|

Request

```
{
	%params%,
	"accept":true//false reject:
	"messageid":12
}
```
### 4.11.2 消息操作 - 读

|**URI**|/message/markAsRead|
|:-:|:-:|
|**Method**| POST|
|**Role**| 1 2 3 4|

Request

```
{
	"messageid":12
}
```



## 4.12 用户安全信息
### 4.12.1 修改用户手机号


|**URI**|/user/modifyPhone/|
|:-:|:-:|
|**Method**| POST|
|**Role**| 1|

Request 2:

```
{
	"oldVerifyCode":"133387",//sendValidateCode拿的验证码
	"newPhone":"187129892",
	"newVerifyCode":"127292"
}I

```





### 4.12.2 修改密码
|**URI**|/user/modifyPassword/|
|:-:|:-:|
|**Method**| POST|
|**Role**| 1 2 3 4|

Request-Header(Authentication)

```
{
	"oldPasswd":"xxxxxxx",
	"newPasswd":"yyyyyyy"
}
```


